{% extends "base.html" %}
{% block title %}Profile â€“ DNS Watcher{% endblock %}
{% block content %}
<div class="max-w-2xl mx-auto space-y-6">
  <h1 class="text-2xl font-bold text-light-content-primary dark:text-content-primary">
    <i class="bi bi-person-circle mr-2"></i>My Profile
  </h1>

  {# Profile Section #}
  <div class="mica-card p-5">
    <h2 class="text-lg font-semibold text-light-content-primary dark:text-content-primary mb-4">
      Profile Information
    </h2>
    <form method="POST" action="{{ url_for('auth.profile') }}" novalidate>
      {{ form.hidden_tag() }}

      {# Username (read-only) #}
      <div class="mb-4">
        <label class="block text-sm font-semibold text-light-content-primary dark:text-content-primary mb-1">Username</label>
        <input type="text" value="{{ current_user.username }}" class="mica-input" disabled>
      </div>

      {# Full Name #}
      <div class="mb-4">
        <label for="{{ form.full_name.id }}" class="block text-sm font-semibold text-light-content-primary dark:text-content-primary mb-1">{{ form.full_name.label.text }}</label>
        {{ form.full_name(class="mica-input", placeholder="Your full name") }}
      </div>

      {# Email #}
      <div class="mb-4">
        <label for="{{ form.email.id }}" class="block text-sm font-semibold text-light-content-primary dark:text-content-primary mb-1">{{ form.email.label.text }}</label>
        {{ form.email(class="mica-input", placeholder="your@email.com") }}
        {% for error in form.email.errors %}
          <p class="mt-1 text-xs text-status-danger">{{ error }}</p>
        {% endfor %}
      </div>

      {# Language #}
      <div class="mb-4">
        <label for="{{ form.language.id }}" class="block text-sm font-semibold text-light-content-primary dark:text-content-primary mb-1">{{ form.language.label.text }}</label>
        {{ form.language(class="mica-input") }}
      </div>

      {# Role (read-only) #}
      <div class="mb-4">
        <label class="block text-sm font-semibold text-light-content-primary dark:text-content-primary mb-1">Role</label>
        <input type="text" value="{{ current_user.role }}" class="mica-input" disabled>
      </div>

      <div>{{ form.submit(class="btn-primary") }}</div>
    </form>
  </div>

  {# Password Section #}
  <div class="mica-card p-5">
    <h2 class="text-lg font-semibold text-light-content-primary dark:text-content-primary mb-4">
      Change Password
    </h2>
    <form method="POST" action="{{ url_for('auth.change_password') }}" novalidate>
      {{ password_form.hidden_tag() }}

      <div class="mb-4">
        <label for="{{ password_form.current_password.id }}" class="block text-sm font-semibold text-light-content-primary dark:text-content-primary mb-1">{{ password_form.current_password.label.text }}</label>
        {{ password_form.current_password(class="mica-input") }}
      </div>

      <div class="mb-4">
        <label for="{{ password_form.new_password.id }}" class="block text-sm font-semibold text-light-content-primary dark:text-content-primary mb-1">{{ password_form.new_password.label.text }}</label>
        {{ password_form.new_password(class="mica-input") }}
        <p class="mt-1 text-xs text-light-content-muted dark:text-content-muted">Minimum 8 characters</p>
      </div>

      <div class="mb-4">
        <label for="{{ password_form.confirm_password.id }}" class="block text-sm font-semibold text-light-content-primary dark:text-content-primary mb-1">{{ password_form.confirm_password.label.text }}</label>
        {{ password_form.confirm_password(class="mica-input") }}
      </div>

      <div>{{ password_form.submit_password(class="btn-primary") }}</div>
    </form>
  </div>
</div>
{% endblock %}
